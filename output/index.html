<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>KocomojoSDK for Android</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link type="text/css" rel="stylesheet" href="assets/css/pilcrow.css"/>
    <link type="text/css" rel="stylesheet" href="assets/css/hljs-github.min.css"/>
    <link type="text/css" rel="stylesheet" href="assets/css/style.css"/>
  </head>
<body>
  <div class="container-fluid">
    <div class="row-fluid">
      <div class="col-xs-3"><ul class="nav nav-list" style="height:100%;overflow-y:scroll;">
    <li class="sidebar-header-1"><a href="#kocomojosdk-for-android">KocomojoSDK for Android</a></li>
    <li class="sidebar-header-2"><a href="#installation">Installation</a></li>
    <li class="sidebar-header-3"><a href="#repositories">Repositories</a></li>
    <li class="sidebar-header-3"><a href="#dependencies">Dependencies</a></li>
    <li class="sidebar-header-3"><a href="#32-bit">32-Bit</a></li>
    <li class="sidebar-header-2"><a href="#implementation">Implementation</a></li>
    <li class="sidebar-header-3"><a href="#api-key-validation">API Key validation</a></li>
    <li class="sidebar-header-3"><a href="#auto-show-experiences">Auto Show Experiences</a></li>
    <li class="sidebar-header-2"><a href="#adding-the-button">Adding the Button</a></li>
    <li class="sidebar-header-2"><a href="#location-permissions">Location Permissions</a></li>
    <li class="sidebar-header-2"><a href="#local-push-notifications">Local Push Notifications</a></li>
    <li class="sidebar-header-3"><a href="#title">Title</a></li>
    <li class="sidebar-header-3"><a href="#icon">Icon</a></li>
    <li class="sidebar-header-3"><a href="#frequency">Frequency</a></li>
    <li class="sidebar-header-3"><a href="#push-templates">Push Templates</a></li>
    <li class="sidebar-header-2"><a href="#notification-listener">Notification Listener</a></li>
    <li class="sidebar-header-3"><a href="#onbuttontouched">onButtonTouched</a></li>
    <li class="sidebar-header-3"><a href="#onbuttonenabled">onButtonEnabled</a></li>
    <li class="sidebar-header-3"><a href="#onexperiencesinrange">onExperiencesInRange</a></li>
    <li class="sidebar-header-3"><a href="#onbluetoothdisabled">onBluetoothDisabled</a></li>
</ul>        </div>
      </div>
      <div class="col-xs-9 main"><h1 id="kocomojosdk-for-android"><a class="header-link" href="#kocomojosdk-for-android"></a>KocomojoSDK for Android</h1>
<h2 id="installation"><a class="header-link" href="#installation"></a>Installation</h2>
<p>&nbsp;</p>
<h3 id="repositories"><a class="header-link" href="#repositories"></a>Repositories</h3>
<p>Add KocomojoSDK Android Maven repository to your <code>build.gradle</code> file: </p>
<pre class="hljs"><code>repositories {
  maven {
      url <span class="hljs-string">'https://raw.githubusercontent.com/KocomojoLLC/KocomojoSDK-Android/master'</span>
  }
}</code></pre><h3 id="dependencies"><a class="header-link" href="#dependencies"></a>Dependencies</h3>
<p>Add KocomojoSDK as a dependency: </p>
<pre class="hljs"><code>dependencies {
  compile <span class="hljs-string">'com.kocomojo:kocomojo-sdk:0.9.822'</span>
}</code></pre><p>Then simply run <code>gradle</code> to install KocomojoSDK into your project.  </p>
<p>&nbsp;</p>
<h3 id="32-bit"><a class="header-link" href="#32-bit"></a>32-Bit</h3>
<p>Currently KocomojoSDK only supports 32-bit libraries.  To ensure compatibility, you&#39;ll need to ensure it only uses 32-bit libraries: </p>
<pre class="hljs"><code>android {
  ...
  defaultConfig {
    ...
    ndk {
        abiFilters <span class="hljs-string">"armeabi-v7a"</span>, <span class="hljs-string">"x86"</span>
    }
  }
}</code></pre><h2 id="implementation"><a class="header-link" href="#implementation"></a>Implementation</h2>
<p>Import <code>KocomojoSDK</code> into your <code>MainApplication.java</code>:</p>
<p><code>import com.kocomojo.KocomojoSDK;</code></p>
<p>Add these lines to <code>onCreate()</code>: </p>
<pre class="hljs"><code>KocomojoSDK.setApplication(<span class="hljs-keyword">this</span>);

KocomojoSDK
  .getInstance()
  .setApiKey(<span class="hljs-string">"YOUR_API_KEY_HERE"</span>)
  .setRadiusInMiles(<span class="hljs-number">17.0</span>)
  .setShowPushNotifications(<span class="hljs-keyword">true</span>);</code></pre><h3 id="api-key-validation"><a class="header-link" href="#api-key-validation"></a>API Key validation</h3>
<p>You can validate your api key directly by calling </p>
<pre class="hljs"><code>KocomojoSDK.getInstance().validateApiKey(<span class="hljs-keyword">new</span> KocomojoSDK.ValidateApiKeyHandler() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onValidated</span><span class="hljs-params">()</span> </span>{
        Log.d(<span class="hljs-string">"ApiKey"</span>, <span class="hljs-string">"Is valid!"</span>);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onInvalidated</span><span class="hljs-params">()</span> </span>{
        Log.d(<span class="hljs-string">"ApiKey"</span>, <span class="hljs-string">"Is invalid!"</span>);
    }
});</code></pre><p>&nbsp;</p>
<h3 id="auto-show-experiences"><a class="header-link" href="#auto-show-experiences"></a>Auto Show Experiences</h3>
<p>You can have experiences automatically pop up once the user is within range. </p>
<p>To do this: </p>
<pre class="hljs"><code>KocomojoSDK.getInstance().setAutomaticallyShowExperiences(<span class="hljs-keyword">true</span>);</code></pre><h2 id="adding-the-button"><a class="header-link" href="#adding-the-button"></a>Adding the Button</h2>
<p>Inside of the layout for the <em>Activity</em> where you&#39;d like the button to be add a fragment: </p>
<pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">fragment</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"250dp"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"250dp"</span>
    <span class="hljs-attr">android:name</span>=<span class="hljs-string">"com.kocomojo.SdkButton"</span>
    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/fragment"</span>
    <span class="hljs-attr">android:layout_gravity</span>=<span class="hljs-string">"center"</span>
    /&gt;</span></code></pre><p>You can use the fragment as-is (blank) if you want to use it as an overlay, or you can also assign 
an enabled and disabled image to it: </p>
<pre class="hljs"><code>KocomojoSDK.getInstance()
  .setDisabledImageName(<span class="hljs-string">"button_disabled"</span>)
  .setEnabledImageName(<span class="hljs-string">"button_enabled"</span>);</code></pre><h2 id="location-permissions"><a class="header-link" href="#location-permissions"></a>Location Permissions</h2>
<p>Add this line to let KocomjoSDK know the results of it asking for permission to access location in the activity that contains the button: </p>
<pre class="hljs"><code><span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onRequestPermissionsResult</span><span class="hljs-params">(<span class="hljs-keyword">int</span> requestCode, String[] permissions, <span class="hljs-keyword">int</span>[] grantResults)</span> </span>{
  KocomojoSDK.onRequestPermissionsResult(requestCode, permissions, grantResults);
}</code></pre><p>&nbsp;</p>
<h2 id="local-push-notifications"><a class="header-link" href="#local-push-notifications"></a>Local Push Notifications</h2>
<p>You can have KocomojoSDK send Push Notifications whenever an Experiences comes in range. </p>
<p>To enable this:</p>
<pre class="hljs"><code>KocomojoSDK.getInstance()
  .setPushLaunchActivityClass(MainActivity.class)  <span class="hljs-comment">// set it to the class of the Activity that contains the button </span>
  .setShowPushNotifications(<span class="hljs-keyword">true</span>);</code></pre><p>&nbsp;</p>
<h3 id="title"><a class="header-link" href="#title"></a>Title</h3>
<p>TO set the title of Push Notifications, use <code>setPushNotificationTitle</code>: </p>
<pre class="hljs"><code>KocomojoSDK.getInstance()
  .setPushNotificationTitle(<span class="hljs-string">"Your Title"</span>);</code></pre><h3 id="icon"><a class="header-link" href="#icon"></a>Icon</h3>
<p>To set the icon of Push Notifications, use <code>setPushSmallIcon</code>:</p>
<pre class="hljs"><code>KocomojoSDK.getInstance()
  .setPushSmallIcon(R.mipmap.ic_launcher);</code></pre><h3 id="frequency"><a class="header-link" href="#frequency"></a>Frequency</h3>
<p>You change the frequency of push notifications - how many seconds will need to pass after a push notification for another one to occur.  (Any notifications that would occur during this time is ignored as to not overwhelm the client.)  This defaults to 60 &#42; 60 &#42; 2 = 3600, or 2 hours.</p>
<pre class="hljs"><code>KocomojoSDK.getInstance()
  .setMinimumSecondsBetweenPushNotifications(<span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">2</span>);</code></pre><p>&nbsp;</p>
<h3 id="push-templates"><a class="header-link" href="#push-templates"></a>Push Templates</h3>
<p>There are 2 templates that can be customized by the client.  One is for <code>pushTemplateSingular</code> (when there&#39;s one Experience in range) and the other is <code>pushTemplatePlural</code> (when there&#39;s more than one Experience in range.)</p>
<p>They can be assigned like:</p>
<pre class="hljs"><code>KocomojoSDK.getInstance()
  .setPushTemplateSingular(<span class="hljs-string">"An awesome experience __NAME__ has just entered your sphere"</span>)
  .setPushTemplatePlural(<span class="hljs-string">"__NAMES__ are all available!"</span>);</code></pre><p>&nbsp;</p>
<h2 id="notification-listener"><a class="header-link" href="#notification-listener"></a>Notification Listener</h2>
<pre class="hljs"><code>KocomjoSDK.getInstance()
  .setNotificationListener(<span class="hljs-keyword">new</span> KocomojoSDK.NotificationListener() {
      <span class="hljs-meta">@Override</span>
      <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onButtonEnabled</span><span class="hljs-params">(Boolean isEnabled)</span> </span>{
          Log.d(<span class="hljs-string">"MainApplication"</span>, <span class="hljs-string">"Button enabled? "</span> + isEnabled.toString());
      }

      <span class="hljs-meta">@Override</span>
      <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onButtonTouched</span><span class="hljs-params">()</span> </span>{
          Log.d(<span class="hljs-string">"MainApplication"</span>, <span class="hljs-string">"Button Touched!"</span>);
      }

      <span class="hljs-meta">@Override</span>
      <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onExperiencesInRange</span><span class="hljs-params">(ArrayList experiencesList)</span> </span>{
          Log.d(<span class="hljs-string">"MainApplication"</span>, <span class="hljs-string">"Experiences in range "</span> + experiencesList.toString());
      }

      <span class="hljs-meta">@Override</span>
      <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onBluetoothDisabled</span><span class="hljs-params">()</span> </span>{
          Log.d(<span class="hljs-string">"MainApplication"</span>, <span class="hljs-string">"Bluetooth Disabled!"</span>);
      }
})</code></pre><p> &nbsp;</p>
<h3 id="onbuttontouched"><a class="header-link" href="#onbuttontouched"></a>onButtonTouched</h3>
<p>This simply tells when the button is touched, whether or not it is enabled.  </p>
<h3 id="onbuttonenabled"><a class="header-link" href="#onbuttonenabled"></a>onButtonEnabled</h3>
<p>This is called when the button is either enabled or disabled.</p>
<h3 id="onexperiencesinrange"><a class="header-link" href="#onexperiencesinrange"></a>onExperiencesInRange</h3>
<p>When experiences come in range (or go out of range) this will be posted.</p>
<h3 id="onbluetoothdisabled"><a class="header-link" href="#onbluetoothdisabled"></a>onBluetoothDisabled</h3>
<p>This is called if the user launches the app with Bluetooth disabled, or if they disable Bluetooth while in the app.</p>
      </div>
    </div>
  </div>

  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script type="text/javascript" src="assets/js/bootstrap.min.js"></script>
</body>
</html>
